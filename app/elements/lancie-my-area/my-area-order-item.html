<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-item/paper-item-body.html">
<link rel="import" href="../../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../../bower_components/paper-dialog-scrollable/paper-dialog-scrollable.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../bower_components/neon-animation/neon-animations.html">

<dom-module id="my-area-order-item">
  <template>
    <style include="iron-flex iron-flex-alignment"></style>
    <style>
    :host {
      display: block;
    }

    h3 {
      margin: 0;
    }

    .info {
      margin: 0 0 0 5px;
      width: 200px;
    }

    hr {
      display: block;
      height: 1px;
      border: 0;
      border-top: 1px solid #e8e8e8;
      padding: 0;
    }

    .layout div {
      flex: 1;
      text-align: center;
    }

    .layout div:first-child {
      text-align: left;
    }

    .stats {
      width: 200px;
    }

    .orderstats {
      position: absolute;
      right: 0;
      top: 0;
      text-align: right;
    }
    </style>

    <paper-item id="{{order.id}}" class="layout horizontal center justified wrap" on-tap="showOrderTickets">
      <div>
        <h3>#{{order.id}}</h3>
      </div>
      <div class="info">{{order.creationDateTime}}</div>
      <div class="info">{{order.status}}</div>
    </paper-item>
    <hr>

    <paper-dialog id="orderInfo" entry-animation="scale-up-animation" exit-animation="scale-down-animation" with-backdrop >
      <h2>Order #{{order.id}}</h2>
      <div class="orderstats">
        <div>{{order.creationDateTime}}</div>
        <div>&euro; {{order.amount}}</div>
        <div>{{order.status}}</div>
      </div>
      <paper-dialog-scrollable>
        <template is="dom-repeat" items="{{order.tickets}}" status="{{order.status}}" index-as="index">
          <hr>
            <paper-item class="layout horizontal center justified">
              <!-- <iron-icon icon="receipt" item-icon></iron-icon> -->
            <div class="stats"><b>Type: </b>{{item.text}}</div>
            <div class="stats"><b>Amount: </b>&euro; {{item.price}}</div>
            <div class="stats">CH member:
              <iron-icon icon="{{getIcon(item.chMember)}}"></iron-icon>
            </div>
            <div class="stats">Pickup service:
              <iron-icon icon="{{getIcon(item.pickupService)}}"></iron-icon>
            </div>
          </paper-item>
        </template>
      </paper-dialog-scrollable>
      <div class="buttons">
        <paper-button dialog-dismiss>Back</paper-button>
      </div>
    </paper-dialog>
  </template>
  <script>
    'use strict';

    Polymer({
      is: 'my-area-order-item',

      properties: {
        order: {
          type: Object,
          notify: true
        }
      },
      getIcon: function(binding) {
        return binding ? 'icons:check' : 'icons:clear';
      },
      showOrderTickets: function() {
        this.$.orderInfo.toggle();
      }
    });
  </script>
</dom-module>
